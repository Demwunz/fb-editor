<%= f.hidden_field :deployment_environment, value: deployment_environment %>

<details class="govuk-details" data-module="govuk-details">
  <summary class="govuk-details__summary">
    <span class="govuk-details__summary-text" id="configure-<%= deployment_environment %>">Configure</span>
  </summary>
  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
      <h3 class="govuk-fieldset__heading">
        <%= f.object.class.human_attribute_name :email_fieldset %>
      </h3>
    </legend>

    <div class="govuk-form-group <%= !f.object.errors[:service_email_output].empty? ? 'govuk-form-group--error' : '' %> ">
      <% f.object.errors[:service_email_output].each do |message| %>
        <span class="govuk-error-message"><%= message %></span>
      <% end %>
      <%= f.label :service_email_output, class: "govuk-label" %>
      <%= f.text_field :service_email_output, class: "govuk-input width-responsive-two-thirds" %>
    </div>

    <div class="govuk-form-group">
      <%= f.label :service_email_subject, class: "govuk-label" %>
      <%= f.text_field :service_email_subject, class: "govuk-input width-responsive-two-thirds" %>
    </div>

    <div class="govuk-form-group">
      <%= f.label :service_email_body, class: "govuk-label" do %>
        <%= f.object.class.human_attribute_name :service_email_body %>
        <span class="govuk-hint"><%= f.object.class.human_attribute_name :service_email_body_hint %></span>
      <% end %>
      <%= f.text_area :service_email_body, class: "govuk-textarea width-responsive-two-thirds", rows: '5' %>
    </div>
  </fieldset>

  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
      <h3 class="govuk-fieldset__heading">
        <%= f.object.class.human_attribute_name :pdf_fieldset %>
      </h3>
    </legend>

    <div class="govuk-hint">
      <p><%= f.object.class.human_attribute_name :pdf_hint %></p>
      <p><%= link_to f.object.class.human_attribute_name(:pdf_sample), asset_url('/sample.pdf'), class: 'govuk-link', target: '_blank' %></p>
    </div>

    <div class="govuk-form-group">
      <%= f.label :service_email_pdf_heading, class: "govuk-label" %>
      <%= f.text_field :service_email_pdf_heading, class: "govuk-input width-responsive-two-thirds", rows: '5' %>
    </div>

    <div class="govuk-form-group">
      <%= f.label :service_email_pdf_subheading, class: "govuk-label" %>
      <%= f.text_field :service_email_pdf_subheading, class: "govuk-input width-responsive-two-thirds" %>
    </div>
  </fieldset>

  <fieldset class="govuk-fieldset">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
      <h3 class="govuk-fieldset__heading">
        <%= f.object.class.human_attribute_name :csv_attachment %>
      </h3>
    </legend>

    <div class="govuk-hint">
      <p><%= f.object.class.human_attribute_name :csv_hint %></p>
      <p><%= link_to f.object.class.human_attribute_name(:csv_sample), asset_url('/sample.csv'), class: 'govuk-link', target: '_blank' %></p>
    </div>

    <div class="govuk-checkboxes">
      <div class="govuk-checkboxes__item">
        <%= f.check_box :service_csv_output, class: 'govuk-checkboxes__input',
          checked: f.object.service_csv_output_checked? %>
        <%= f.label :service_csv_output,
          f.object.class.human_attribute_name(:csv_checkbox),
          class: 'govuk-label govuk-checkboxes__label' %>
      </div>
    </div>
  </fieldset>
</details>
