<%= conditional.fields_for :expressions do |expression| %>
  <div class="condition">
    <div class="question govuk-form-group
      <%= expression.object.errors[:component].empty? ? '' : 'govuk-form-group--error' %>"
      data-expression-index="<%= expression.index %>">

      <%= expression.label :component, (expression.index == 0 ? t('branches.expression.if'): t('branches.expression.and')), { class: "govuk-label" } %>

      <% expression.object.errors[:component].each do |message| %>
        <span class="govuk-error-message"><%= message %></span>
      <% end %>

      <%= expression.select :component,
        @branch.previous_questions,
        { include_blank: t('branches.select_question') },
        { class: 'govuk-select' } %>
    </div>
  </div>
<% end %>
